<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Unify Portal</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        /* Basisstijl voor het Inter-lettertype */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Aangepaste stijlen voor de laad-spinner */
        .spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Stijlen voor de carousel */
        .carousel-slide {
            transition: opacity 1s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-900 text-white p-6 md:p-12">

    <header class="mb-10">
        <div class="flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0">
            <!-- Titel -->
            <div>
                <h1 class="text-4xl font-extrabold" data-lang-key="portal_title">Project Unify Portal</h1>
                <p class="text-lg text-gray-400" data-lang-key="portal_subtitle">Uw portaal naar gespecialiseerde oplossingen</p>
            </div>
            
            <!-- Taalwisselaar -->
            <div class="flex space-x-2 bg-gray-800 p-2 rounded-lg">
                <button onclick="changeLanguage('nl')" class="lang-btn active:bg-indigo-600 bg-gray-700 text-white font-semibold py-2 px-4 rounded-md transition-all duration-200">NL</button>
                <button onclick="changeLanguage('en')" class="lang-btn active:bg-indigo-600 bg-gray-700 text-white font-semibold py-2 px-4 rounded-md transition-all duration-200">EN</button>
                <button onclick="changeLanguage('fr')" class="lang-btn active:bg-indigo-600 bg-gray-700 text-white font-semibold py-2 px-4 rounded-md transition-all duration-200">FR</button>
            </div>
        </div>
    </header>

    <!-- Uitgebreid Navigatie Raster -->
    <section id="exhaustive-portal">
        <!-- 1-koloms layout op mobiel (default), 4-koloms vanaf 'lg' (pc) -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 lg:gap-6">
            
            <!-- Kaart 1: DEMA -->
            <div class="bg-gray-800 rounded-xl shadow-lg flex flex-col transition-all duration-300 ease-in-out hover:shadow-2xl hover:shadow-indigo-500/30 overflow-hidden">
                <!-- KLIKBARE WRAPPER (HEADER + AFBEELDING + INFO) -->
                <a href="https://www.demashop.be/" target="_blank" rel="noopener noreferrer" class="block group">
                    <!-- DEMA Kaart Header -->
                    <div class="bg-indigo-600 p-6 group-hover:bg-indigo-700 transition-colors duration-300">
                        <h2 class="text-4xl font-extrabold text-white tracking-tight">DEMA</h2>
                    </div>
                    
                    <!-- AI Afbeeldingscarrousel Container -->
                    <div id="dema-carousel-container" class="aspect-video bg-gray-700 flex items-center justify-center relative overflow-hidden">
                        <!-- Spinner -->
                        <div id="dema-spinner" class="spinner w-12 h-12 border-4 border-indigo-300 border-t-transparent rounded-full absolute"></div>
                        <!-- Afbeeldingen worden hier door JS ingevoegd -->
                    </div>

                    <!-- DEMA Kaart Inhoud (BOVENSTE DEEL) -->
                    <div class="p-6 md:p-8 group-hover:bg-gray-700/50 transition-colors duration-300">
                        <p class="text-gray-300 mb-4" data-lang-key="dema_spec">De Foundation en Uitgebreide Leverancier</p>
                        <p class="text-sm text-gray-400 mb-6" data-lang-key="dema_niche">
                            <strong>Niches:</strong> Pompen, Leidingsystemen, Slangen, Aandrijftechniek & Beregening
                        </p>
                    </div>
                </a> <!-- EINDE KLIKBARE WRAPPER -->

                <!-- DEMA Kaart Inhoud (ONDERSTE DEEL - DE LINKS) -->
                <div class="p-6 md:p-8 pt-0">
                    <hr class="border-gray-700 my-6">
                    <h3 class="text-xl font-semibold text-white mb-4" data-lang-key="links_header">Belangrijkste Links</h3>
                    <div class="flex flex-wrap gap-2">
                        <!-- Links worden hier ingevoegd -->
                        <a href="https://www.demashop.be/nl/producten/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_producten">Producten</a>
                        <a href="https://www.demashop.be/nl/nieuws-promoties/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_nieuws">Nieuws & promoties</a>
                        <a href="https://www.demashop.be/nl/downloads/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_downloads">Downloads</a>
                        <a href="https://www.demashop.be/nl/vacatures/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_vacatures">Vacatures</a>
                        <a href="https://www.demashop.be/nl/over-ons/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_over_ons">Over ons</a>
                        <a href="https://www.demashop.be/nl/contact/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_contact">Contact</a>
                        <a href="https://www.demashop.be/nl/producten/pompen-toebehoren/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_pompen">Pompen & toebehoren</a>
                        <a href="https://www.demashop.be/nl/producten/kunststof-leidingsystemen/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_kunststof">Kunststof leidingsystemen</a>
                        <a href="https://www.demashop.be/nl/producten/metalen-leidingsystemen/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_metaal">Metalen leidingsystemen</a>
                        <a href="https://www.demashop.be/nl/producten/industriele-slangen-koppelingen/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_slangen">Industriële slangen & koppelingen</a>
                        <a href="https://www.demashop.be/nl/producten/aandrijftechniek/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_aandrijf">Aandrijftechniek</a>
                        <a href="https://www.demashop.be/nl/producten/afsluiters-appendages/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_afsluiters">Afsluiters & appendages</a>
                        <a href="https://www.demashop.be/nl/producten/meet-regeltechniek/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_meet">Meet- & regeltechniek</a>
                        <a href="https://www.demashop.be/nl/producten/beregening-land-tuinbouw/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-200" data-lang-key="link_beregening">Beregening</a>
                    </div>
                </div>
            </div>

            <!-- Kaart 2: FLUXER -->
            <div class="bg-gray-800 rounded-xl shadow-lg flex flex-col transition-all duration-300 ease-in-out hover:shadow-2xl hover:shadow-blue-500/30 overflow-hidden">
                <!-- KLIKBARE WRAPPER -->
                <a href="https://www.fluxer.be/" target="_blank" rel="noopener noreferrer" class="block group">
                    <!-- FLUXER Kaart Header -->
                    <div class="bg-blue-600 p-6 group-hover:bg-blue-700 transition-colors duration-300">
                        <h2 class="text-4xl font-extrabold text-white tracking-tight">FLUXER</h2>
                    </div>
                    
                    <!-- AI Afbeeldingscarrousel Container -->
                    <div id="fluxer-carousel-container" class="aspect-video bg-gray-700 flex items-center justify-center relative overflow-hidden">
                        <!-- Spinner -->
                        <div id="fluxer-spinner" class="spinner w-12 h-12 border-4 border-blue-300 border-t-transparent rounded-full absolute"></div>
                        <!-- Afbeeldingen worden hier door JS ingevoegd -->
                    </div>

                    <!-- FLUXER Kaart Inhoud (BOVENSTE DEEL) -->
                    <div class="p-6 md:p-8 group-hover:bg-gray-700/50 transition-colors duration-300">
                        <p class="text-gray-300 mb-4" data-lang-key="fluxer_spec">De Specialist in Industriële Procesflow Oplossingen</p>
                        <p class="text-sm text-gray-400 mb-6" data-lang-key="fluxer_niche">
                            <strong>Niches:</strong> Industriële Procesflow, Pompen, Afsluiters & Instrumentatie
                        </p>
                    </div>
                </a> <!-- EINDE KLIKBARE WRAPPER -->
                
                <!-- FLUXER Kaart Inhoud (ONDERSTE DEEL - DE LINKS) -->
                <div class="p-6 md:p-8 pt-0">
                    <hr class="border-gray-700 my-6">
                    <h3 class="text-xl font-semibold text-white mb-4" data-lang-key="links_header">Belangrijkste Links</h3>
                    <div class="flex flex-wrap gap-2">
                        <!-- Links worden hier ingevoegd -->
                        <a href="https://www.fluxer.be/nl/toepassingsgebieden/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-blue-600 hover:text-white transition-all duration-200" data-lang-key="link_toepassing">Toepassingsgebieden</a>
                        <a href="https://www.fluxer.be/nl/diensten/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-blue-600 hover:text-white transition-all duration-200" data-lang-key="link_diensten">Diensten</a>
                        <a href="https://www.fluxer.be/nl/producten/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-blue-600 hover:text-white transition-all duration-200" data-lang-key="link_producten">Producten</a>
                        <a href="https://www.fluxer.be/nl/industrieen/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-blue-600 hover:text-white transition-all duration-200" data-lang-key="link_industrie">Industrieën</a>
                        <a href="https://www.fluxer.be/nl/over-ons/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-blue-600 hover:text-white transition-all duration-200" data-lang-key="link_over_ons">Over ons</a>
                        <a href="https://www.fluxer.be/nl/vacatures/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-blue-600 hover:text-white transition-all duration-200" data-lang-key="link_vacatures">Vacatures</a>
                        <a href="https://www.fluxer.be/nl/contact/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-blue-600 hover:text-white transition-all duration-200" data-lang-key="link_contact">Contact</a>
                        <a href="https://www.fluxer.be/nl/nieuws/" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-blue-600 hover:text-white transition-all duration-200" data-lang-key="link_nieuws_kort">Nieuws</a>
                    </div>
                </div>
            </div>

            <!-- Kaart 3: BELTZ247 -->
            <div class="bg-gray-800 rounded-xl shadow-lg flex flex-col transition-all duration-300 ease-in-out hover:shadow-2xl hover:shadow-green-500/30 overflow-hidden">
                <!-- KLIKBARE WRAPPER -->
                <a href="https://beltz247.com/" target="_blank" rel="noopener noreferrer" class="block group">
                    <!-- BELTZ247 Kaart Header -->
                    <div class="bg-green-600 p-6 group-hover:bg-green-700 transition-colors duration-300">
                        <h2 class="text-4xl font-extrabold text-white tracking-tight">BELTZ<span class="text-green-200">247</span></h2>
                    </div>
                    
                    <!-- AI Afbeeldingscarrousel Container -->
                    <div id="beltz-carousel-container" class="aspect-video bg-gray-700 flex items-center justify-center relative overflow-hidden">
                        <!-- Spinner -->
                        <div id="beltz-spinner" class="spinner w-12 h-12 border-4 border-green-300 border-t-transparent rounded-full absolute"></div>
                        <!-- Afbeeldingen worden hier door JS ingevoegd -->
                    </div>

                    <!-- BELTZ247 Kaart Inhoud (BOVENSTE DEEL) -->
                    <div class="p-6 md:p-8 group-hover:bg-gray-700/50 transition-colors duration-300">
                        <p class="text-gray-300 mb-4" data-lang-key="beltz_spec">De Partner voor Transportsystemen en 24/7 Onderhoud</p>
                        <p class="text-sm text-gray-400 mb-6" data-lang-key="beltz_niche">
                            <strong>Niches:</strong> Transportbanden, 24/7 Service, Onderhoud & Realisaties
                        </p>
                    </div>
                </a> <!-- EINDE KLIKBARE WRAPPER -->

                <!-- BELTZ247 Kaart Inhoud (ONDERSTE DEEL - DE LINKS) -->
                <div class="p-6 md:p-8 pt-0">
                    <hr class="border-gray-700 my-6">
                    <h3 class="text-xl font-semibold text-white mb-4" data-lang-key="links_header">Belangrijkste Links</h3>
                    <div class="flex flex-wrap gap-2">
                        <!-- Links worden hier ingevoegd -->
                        <a href="https://beltz247.com/nl" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-green-600 hover:text-white transition-all duration-200" data-lang-key="link_home">Home</a>
                        <a href="https://beltz247.com/nl/transportbanden-componenten" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-green-600 hover:text-white transition-all duration-200" data-lang-key="link_transport">Transportbanden & Componenten</a>
                        <a href="https://beltz247.com/nl/service-onderhoud" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-green-600 hover:text-white transition-all duration-200" data-lang-key="link_service">Service & Onderhoud</a>
                        <a href="https://beltz247.com/nl/realisaties" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-green-600 hover:text-white transition-all duration-200" data-lang-key="link_realisaties">Realisaties</a>
                        <a href="https://beltz247.com/nl/over-beltz247" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-green-600 hover:text-white transition-all duration-200" data-lang-key="link_over_ons">Over Beltz247</a>
                        <a href="https://beltz247.com/nl/vacatures" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-green-600 hover:text-white transition-all duration-200" data-lang-key="link_vacatures">Vacatures</a>
                        <a href="https://beltz247.com/nl/contact" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-green-600 hover:text-white transition-all duration-200" data-lang-key="link_contact">Contact</a>
                    </div>
                </div>
            </div>

            <!-- Kaart 4: Devisschere Tech -->
            <div class="bg-gray-800 rounded-xl shadow-lg flex flex-col transition-all duration-300 ease-in-out hover:shadow-2xl hover:shadow-teal-500/30 overflow-hidden">
                <!-- KLIKBARE WRAPPER -->
                <a href="https://www.devisscheretechnics.be/" target="_blank" rel="noopener noreferrer" class="block group">
                    <!-- DE VISSCHERE TECHNICS Kaart Header (Aangepast) -->
                    <div class="bg-teal-600 p-6 group-hover:bg-teal-700 transition-colors duration-300">
                        <!-- Aangepaste titel: ingekort en text-4xl -->
                        <h2 class="text-4xl font-extrabold text-white tracking-tight">Devisschere Tech</h2>
                    </div>
                    
                    <!-- AI Afbeeldingscarrousel Container -->
                    <div id="visschere-carousel-container" class="aspect-video bg-gray-700 flex items-center justify-center relative overflow-hidden">
                        <!-- Spinner -->
                        <div id="visschere-spinner" class="spinner w-12 h-12 border-4 border-teal-300 border-t-transparent rounded-full absolute"></div>
                        <!-- Afbeeldingen worden hier door JS ingevoegd -->
                    </div>

                    <!-- DE VISSCHERE TECHNICS Kaart Inhoud (BOVENSTE DEEL) -->
                    <div class="p-6 md:p-8 group-hover:bg-gray-700/50 transition-colors duration-300">
                        <p class="text-gray-300 mb-4" data-lang-key="visschere_spec">De Expert in Maatwerk Water- & Irrigatieoplossingen</p>
                        <p class="text-sm text-gray-400 mb-6" data-lang-key="visschere_niche">
                            <strong>Niches:</strong> Wateroplossingen, Irrigatie, Maatwerk & Diensten
                        </p>
                    </div>
                </a> <!-- EINDE KLIKBARE WRAPPER -->

                <!-- DE VISSCHERE TECHNICS Kaart Inhoud (ONDERSTE DEEL - DE LINKS) -->
                <div class="p-6 md:p-8 pt-0">
                    <hr class="border-gray-700 my-6">
                    <h3 class="text-xl font-semibold text-white mb-4" data-lang-key="links_header">Belangrijkste Links</h3>
                    <div class="flex flex-wrap gap-2">
                        <!-- Links worden hier ingevoegd -->
                        <a href="https://www.devisscheretechnics.be/nl/water" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-teal-600 hover:text-white transition-all duration-200" data-lang-key="link_water">Water</a>
                        <a href="https://www.devisscheretechnics.be/nl/irrigatie" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-teal-600 hover:text-white transition-all duration-200" data-lang-key="link_irrigatie">Irrigatie</a>
                        <a href="https://www.devisscheretechnics.be/nl/diensten" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-teal-600 hover:text-white transition-all duration-200" data-lang-key="link_diensten">Diensten</a>
                        <a href="https://www.devisscheretechnics.be/nl/realisaties" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-teal-600 hover:text-white transition-all duration-200" data-lang-key="link_realisaties">Realisaties</a>
                        <a href="https://www.devisscheretechnics.be/nl/over-ons" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-teal-600 hover:text-white transition-all duration-200" data-lang-key="link_over_ons">Over ons</a>
                        <a href="https://www.devisscheretechnics.be/nl/contact" target="_blank" rel="noopener noreferrer" class="text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-teal-600 hover:text-white transition-all duration-200" data-lang-key="link_contact">Contact</a>
                    </div>
                </div>
            </div>

        </div>
    </section>

   <script>
    // Replace this with your deployed proxy endpoint on Vercel (example):
    const PROXY_URL = "https://projectunify.vercel.app/api/generate-image";

    const translations = { /* your full translation object stays exactly as before */ };

    function changeLanguage(lang) {
        localStorage.setItem('preferredLanguage', lang);
        document.querySelectorAll('[data-lang-key]').forEach(el => {
            const key = el.getAttribute('data-lang-key');
            if (translations[lang] && translations[lang][key]) {
                el.innerHTML = translations[lang][key];
            }
        });
        document.documentElement.lang = lang;
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.remove('bg-indigo-600');
            btn.classList.add('bg-gray-700');
            if (btn.textContent.toLowerCase() === lang) {
                btn.classList.add('bg-indigo-600');
                btn.classList.remove('bg-gray-700');
            }
        });
    }

    function initializeLanguage() {
        const preferredLanguage = localStorage.getItem('preferredLanguage') || 'nl';
        changeLanguage(preferredLanguage);
    }

    async function fetchWithBackoff(url, options, retries = 5, delay = 1000) {
        try {
            const response = await fetch(url, options);
            if (!response.ok) {
                if (response.status === 429 && retries > 0) {
                    await new Promise(resolve => setTimeout(resolve, delay));
                    return fetchWithBackoff(url, options, retries - 1, delay * 2);
                }
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return await response.json();
        } catch (error) {
            if (retries > 0) {
                await new Promise(resolve => setTimeout(resolve, delay));
                return fetchWithBackoff(url, options, retries - 1, delay * 2);
            }
            console.error("Fetch mislukt na meerdere pogingen:", error);
            throw error;
        }
    }

    /**
     * Calls your proxy instead of Google’s API directly.
     */
    async function fetchImage(prompt) {
        const result = await fetchWithBackoff(PROXY_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ prompt })
        });

        // The proxy returns the same JSON as Google’s Imagen API
        const prediction = result?.predictions?.[0];
        if (prediction?.bytesBase64Encoded) {
            return `data:image/png;base64,${prediction.bytesBase64Encoded}`;
        }
        throw new Error(`Geen afbeelding ontvangen voor prompt: ${prompt}`);
    }

    function startCarousel(containerId) {
        const container = document.getElementById(containerId);
        if (!container) return;
        const slides = container.querySelectorAll('.carousel-slide');
        if (slides.length < 2) {
            if (slides.length === 1) slides[0].classList.remove('opacity-0');
            return;
        }
        let currentIndex = 0;
        slides[currentIndex].classList.remove('opacity-0');
        setInterval(() => {
            slides[currentIndex].classList.add('opacity-0');
            currentIndex = (currentIndex + 1) % slides.length;
            slides[currentIndex].classList.remove('opacity-0');
        }, 3000);
    }

    async function generateCarouselImages(prompts, containerId, spinnerId) {
        const container = document.getElementById(containerId);
        const spinner = document.getElementById(spinnerId);
        if (!container || !spinner) return;

        const imagePromises = prompts.map(prompt => fetchImage(prompt));
        const results = await Promise.allSettled(imagePromises);

        let hasSuccessfulImages = false;
        results.forEach((result, index) => {
            if (result.status === 'fulfilled') {
                hasSuccessfulImages = true;
                const img = document.createElement('img');
                img.src = result.value;
                img.alt = `AI-generated image for ${containerId} (${index + 1})`;
                img.className = 'carousel-slide absolute w-full h-full object-cover transition-opacity duration-1000 ease-in-out opacity-0';
                container.appendChild(img);
            } else {
                console.error(`Kon afbeelding ${index + 1} voor ${containerId} niet laden:`, result.reason);
            }
        });

        spinner.classList.add('hidden');

        if (hasSuccessfulImages) {
            startCarousel(containerId);
        } else {
            container.innerHTML = `<div class="flex items-center justify-center w-full h-full text-red-400 text-sm p-4">Afbeeldingen laden mislukt</div>`;
        }
    }

    function generateAllImages() {
        const demaPrompts = [
            "Een schone, moderne productfoto van industriële pompen, blauwe kunststof leidingen en glimmende metalen kleppen.",
            "Een gedetailleerde close-up van een grote, zware industriële slang met een metalen koppeling.",
            "Een magazijn vol kleurrijke kunststof buizen en fittingen."
        ];
        generateCarouselImages(demaPrompts, "dema-carousel-container", "dema-spinner");

        const fluxerPrompts = [
            "Een close-up van een industrieel instrumentenpaneel met blauwe lichten en roestvrijstalen kleppen.",
            "Een hightech procespomp van gepolijst roestvrij staal in een schone fabriek.",
            "Een reeks industriële regelkleppen en leidingen in een moderne omgeving."
        ];
        generateCarouselImages(fluxerPrompts, "fluxer-carousel-container", "fluxer-spinner");

        const beltzPrompts = [
            "Een moderne transportband in beweging in een industriële omgeving.",
            "Een close-up van een rubberen transportband met metalen rollen.",
            "Een monteur voert onderhoud uit aan een transportbandsysteem."
        ];
        generateCarouselImages(beltzPrompts, "beltz-carousel-container", "beltz-spinner");

        const visscherePrompts = [
            "Een groot waterfiltratiesysteem voor landbouw, professioneel gefotografeerd.",
            "Een irrigatiesysteem sproeit water over een veld bij zonsopgang.",
            "Technici installeren leidingen voor een irrigatieproject."
        ];
        generateCarouselImages(visscherePrompts, "visschere-carousel-container", "visschere-spinner");
    }

    document.addEventListener('DOMContentLoaded', () => {
        initializeLanguage();
        generateAllImages();
    });
</script>

</body>
</html>

